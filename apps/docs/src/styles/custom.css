/* useFlow Documentation Theme */

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
  scroll-padding-top: 80px;
}

/* Add scroll margin to all heading anchor targets */
h1[id],
h2[id],
h3[id],
h4[id],
h5[id],
h6[id] {
  scroll-margin-top: 80px;
}

/* Browser native view transition */
@view-transition {
  navigation: auto;
}

/* Page content fade-in animation */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

main {
  animation: fadeIn 0.4s ease-out;
}

.sl-markdown-content > * {
  animation: fadeIn 0.5s ease-out backwards;
}

.sl-markdown-content > *:nth-child(1) {
  animation-delay: 0.05s;
}
.sl-markdown-content > *:nth-child(2) {
  animation-delay: 0.1s;
}
.sl-markdown-content > *:nth-child(3) {
  animation-delay: 0.15s;
}
.sl-markdown-content > *:nth-child(4) {
  animation-delay: 0.2s;
}
.sl-markdown-content > *:nth-child(5) {
  animation-delay: 0.25s;
}
.sl-markdown-content > *:nth-child(6) {
  animation-delay: 0.3s;
}
.sl-markdown-content > *:nth-child(7) {
  animation-delay: 0.35s;
}
.sl-markdown-content > *:nth-child(8) {
  animation-delay: 0.4s;
}
.sl-markdown-content > *:nth-child(9) {
  animation-delay: 0.45s;
}
.sl-markdown-content > *:nth-child(10) {
  animation-delay: 0.5s;
}
.sl-markdown-content > *:nth-child(n + 11) {
  animation-delay: 0.5s;
}

/* 
 * Note: Color system now uses standard design system naming in global.css:
 * - primary (blue) for main brand elements
 * - secondary (teal) for accents and highlights
 * - neutral (gray) for backgrounds and text
 */

/* Gradient animation - continuous left to right flow */
@keyframes gradient-flow {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: -200% 50%;
  }
}

/* Make sidebar and nav header match page background */
:root {
  --sl-color-bg: var(--color-neutral-100);
  --sl-color-bg-sidebar: var(--color-neutral-100);
  --sl-color-bg-nav: var(--color-neutral-100);

  /* Borders and hairlines for light mode */
  --sl-color-hairline: var(--color-neutral-300);
  --sl-color-hairline-light: var(--color-neutral-200);

  /* Brand gradient - repeating pattern for seamless animation */
  --brand-gradient: linear-gradient(
    90deg,
    var(--color-primary-300) 0%,
    var(--color-secondary-300) 25%,
    var(--color-primary-300) 50%,
    var(--color-secondary-300) 75%,
    var(--color-primary-300) 100%
  );
  --brand-gradient-direction: 90deg;
}

:root[data-theme="light"] .expressive-code,
.expressive-code[data-theme="light"] {
  /* Code block tabs - make them visible against light background */
  --ec-frm-edTabBarBg: var(--color-neutral-200);
  --ec-frm-edActTabBg: var(--color-neutral-300);
}

:root[data-theme="dark"] {
  --sl-color-bg: var(--color-neutral-900);
  --sl-color-bg-sidebar: var(--color-neutral-900);
  --sl-color-bg-nav: var(--color-neutral-900);

  /* Make code blocks darker than page background */
  --sl-color-black: var(--color-neutral-950);

  /* Borders and hairlines for dark mode */
  --sl-color-hairline: var(--color-neutral-600);
  --sl-color-hairline-light: var(--color-neutral-700);
}

/* Table styling - minimal with horizontal separators only */
.sl-markdown-content table {
  border-collapse: collapse;
  width: 100%;
}

.sl-markdown-content table th,
.sl-markdown-content table td {
  border: none;
  border-bottom: 1px solid var(--sl-color-hairline);
  padding: 0.75rem;
  text-align: left;
}

.sl-markdown-content table thead th {
  border-bottom: 2px solid var(--sl-color-hairline);
  font-weight: 600;
}

.sl-markdown-content table tbody tr:last-child td {
  border-bottom: none;
}

/* Secondary color for badges */
.sl-badge,
[data-theme="light"] .sl-badge {
  --sl-color-accent: var(--color-secondary-300);
}

/* Secondary color for link hover states */
.sl-markdown-content a:hover {
  color: var(--color-secondary-300);
}

/* Primary to secondary gradient for special elements */
.hero .action.primary,
.call-to-action,
a.sl-link-button.primary {
  position: relative;
  overflow: hidden;
  z-index: 0;
  background: none;
}

.hero .action.primary::before,
.call-to-action::before,
.sl-link-button.primary::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--brand-gradient);
  background-size: 200% 100%;
  animation: gradient-flow 4s linear infinite;
  z-index: -1;
}

.hero .action.primary > *,
.call-to-action > *,
.sl-link-button.primary > * {
  position: relative;
  z-index: 1;
}

.hero .action.primary:hover,
.call-to-action:hover {
  opacity: 0.9;
  transform: translateY(-1px);
  transition: all 0.2s ease;
}

/* Code block improvements - apply to frame (includes tabs) */
.expressive-code .frame {
  transition: all 0.3s ease;
  position: relative;
  z-index: 0;
  border-radius: var(--sl-border-radius-md);
}

/* Override Expressive Code border radius - target pre directly */
.expressive-code pre {
  border-radius: var(--sl-border-radius-md);
}

/* Remove outline from frames - keep consistent with regular code blocks */
.expressive-code .frame.has-title,
.expressive-code .frame.is-terminal {
  outline: none;
}

/* Only show gradient border on hover for entire frame (tabs + code) */
.expressive-code .frame::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--sl-border-radius-md);
  padding: 2px;
  background: var(--brand-gradient);
  background-size: 200% 100%;
  animation: gradient-flow 4s linear infinite;
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
  z-index: 10;
}

.expressive-code .frame:hover::after {
  opacity: 1;
}

/* Card hover effects with gradient border */
.sl-link-card,
.card {
  transition: all 0.3s ease;
  position: relative;
}

.sl-link-card::before,
.card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 2px;
  background: var(--brand-gradient);
  background-size: 200% 100%;
  animation: gradient-flow 4s linear infinite;
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.sl-link-card:hover,
.card:hover {
  border-color: transparent;
  box-shadow: none;
}

.sl-link-card:hover::before,
.card:hover::before {
  opacity: 1;
}

/* Gradient text for hero title and header */
.hero h1,
.site-title {
  position: relative;
  background: var(--brand-gradient);
  background-size: 200% 100%;
  animation: gradient-flow 4s linear infinite;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Copy button tooltip */
.expressive-code .feedback {
  background: var(--color-primary-300) !important;
}

/* Search modal background - match page background */
dialog-frame,
.dialog-frame {
  background-color: var(--color-neutral-100) !important;
}

:root[data-theme="dark"] dialog-frame,
:root[data-theme="dark"] .dialog-frame {
  background-color: var(--color-neutral-900) !important;
}

/* 
 * ============================================================================
 * TAILWIND BORDER RESTORATION
 * ============================================================================
 * 
 * The @astrojs/starlight-tailwind integration applies Tailwind's reset which
 * sets `border: 0 solid` on all elements. This breaks Starlight's default
 * borders that are defined in component styles.
 * 
 * Rather than fighting Tailwind's reset globally, we restore borders on
 * specific Starlight components that need them.
 * ============================================================================
 */

/* Sidebar nested items - left border indicator */
.sidebar-pane ul ul li {
  border-inline-start: 1px solid var(--sl-color-hairline-light);
}

/* Code block tabs - restore tab borders */
.expressive-code .frame.has-title:not(.is-terminal) .title {
  border: var(--ec-brdWd) solid var(--ec-frm-edActTabBrdCol);
  border-bottom: none;
}

/* Code block active tab indicator - accent colored underline */
.expressive-code .frame.has-title:not(.is-terminal) .title::after {
  border-bottom: 2px solid var(--sl-color-accent);
}

/* Code block tab bar header - restore border */
.expressive-code .frame.has-title:not(.is-terminal) .header::before {
  border: var(--ec-brdWd) solid var(--ec-frm-edTabBarBrdCol);
}

/* Terminal header bottom border */
.expressive-code .frame.is-terminal .header {
  border: var(--ec-brdWd) solid var(--ec-brdCol);
}

/* Starlight Tabs component - restore tab list border */
starlight-tabs [role="tablist"] {
  border-bottom: 2px solid var(--sl-color-gray-5);
}

/* Starlight Tabs component - restore individual tab borders */
starlight-tabs .tab > [role="tab"] {
  border-bottom: 2px solid var(--sl-color-gray-5);
}

/* Active tab gets accent color border */
starlight-tabs .tab [role="tab"][aria-selected="true"] {
  border-color: var(--sl-color-text-accent);
}

/* Starlight Tabs component - restore individual tab borders */
starlight-tabs .tab > [role="tab"] {
  border-bottom: 2px solid var(--sl-color-gray-5);
}

/* Active page gets accent color */
.sidebar-pane ul ul li:has(> a[aria-current="page"]) {
  border-inline-start-color: var(--sl-color-accent-high);
}

/* Hover state */
.sidebar-pane ul
  ul
  li:has(> a:not([aria-current="page"]):is(:hover, :focus-visible)) {
  border-inline-start-color: var(--sl-color-gray-2);
}

/* Reduce top margin on splash template main content */
.main-pane {
  margin-top: 0 !important;
  padding-top: 0 !important;
}
